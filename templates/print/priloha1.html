<!-- V templates/print/priloha1.html - aktualizace stylu -->

<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <title>Příloha 1 - Hodnoty měření k dokladu {{ faktura.cislo_faktury if faktura else 'XXXX' }}</title>
    <style>
        @page { margin: 2cm; }
        body { font-family: Arial, sans-serif; font-size: 11px; line-height: 1.2; margin: 0; }
        
        .page-header { 
            text-align: center; 
            margin-bottom: 20px; 
            padding-bottom: 10px;
        }
        .header-line1 { font-weight: bold; margin-bottom: 5px; }
        .document-title { font-size: 14px; font-weight: bold; margin-bottom: 10px; }
        
        /* ✅ NOVÝ STYL PRO ODBĚRNÁ MÍSTA */
        .odberne-misto { 
            margin-bottom: 20px; 
            page-break-inside: avoid; 
        }
        .om-header { 
            font-weight: bold; 
            margin-bottom: 5px; 
            font-size: 11px;
            /* ✅ Název na jednom řádku */
            white-space: nowrap;
        }
        
        /* ✅ ČISTÁ TABULKA BEZ OHRANIČENÍ */
        .mereni-table { 
            width: 100%; 
            border-collapse: collapse; 
            margin-bottom: 15px;
            /* ✅ Bez ohraničení */
            border: none;
        }
        .mereni-table th { 
            /* ✅ Bez pozadí, pouze spodní čára */
            background-color: transparent; 
            border: none;
            border-bottom: 1px solid #000;
            padding: 3px 6px; 
            text-align: left; 
            font-weight: bold;
            /* ✅ Menší písmo */
            font-size: 9px;
        }
        .mereni-table td { 
            /* ✅ Bez ohraničení */
            border: none;
            padding: 2px 6px; 
            /* ✅ Menší písmo */
            font-size: 8px;
        }
        
        /* ✅ ZAROVNÁNÍ PODLE VZORU */
        .mereni-table .description { text-align: left; }
        .mereni-table .number { text-align: right; }
        .mereni-table .date { text-align: left; }
        .mereni-table .unit { text-align: left; }
        
        /* ✅ Odstranění barevného podbarvení */
        .vt-row { background-color: transparent; }
        .nt-row { background-color: transparent; }
        
        .back-link { 
            margin-top: 30px; 
            text-align: center; 
        }
    </style>
</head>
<body>
    <!-- HLAVIČKA -->
    <div class="page-header">
        <div class="header-line1">
            Číslo {{ faktura.cislo_faktury if faktura else '' }}
        </div>
        <div style="margin: 5px 0; font-size: 10px;">
            {{ dodavatel.nazev_sro if dodavatel else 'Your energy, s.r.o.' }}, 
            {{ dodavatel.adresa_radek_1 if dodavatel else 'Italská 2584/69' }} 
            {{ dodavatel.adresa_radek_2 if dodavatel else '120 00 Praha 2 - Vinohrady' }}, 
            DIČ {{ dodavatel.dic_sro if dodavatel else 'CZ24833851' }} 
            IČO {{ dodavatel.ico_sro if dodavatel else '24833851' }}
        </div>
        <div class="document-title">Příloha 1 - Hodnoty měření k dokladu</div>
    </div>

    <!-- ✅ ODBĚRNÁ MÍSTA - nový design podle vzoru -->
    {% for odecet in odecty %}
    {% set om = odecet.odberne_misto %}
    <div class="odberne-misto">
        <!-- ✅ Název na jednom řádku -->
        <div class="om-header">
            Odběrné místo: {{ om.cislo_om if om else odecet.oznaceni }} {{ om.nazev_om if om else '' }}
        </div>
        
        <!-- ✅ Čistá tabulka bez ohraničení -->
        <table class="mereni-table">
            <thead>
                <tr>
                    <th class="description">Měření</th>
                    <th class="date">Od</th>
                    <th class="date">Do</th>
                    <th class="number">Počátek</th>
                    <th class="number">Konec</th>
                    <th class="number">Spotřeba</th>
                    <th class="unit">MJ</th>
                    <th class="description">Poznámka</th>
                </tr>
            </thead>
            <tbody>
                <!-- VT řádek -->
                <tr>
                    <td class="description">Spotřeba VT</td>
                    <td class="date">{{ odecet.zacatek_periody_mereni.strftime('%d.%m.%Y') if odecet.zacatek_periody_mereni else '' }}</td>
                    <td class="date">{{ odecet.konec_periody_mereni.strftime('%d.%m.%Y') if odecet.konec_periody_mereni else '' }}</td>
                    <td class="number">{{ "{:,.2f}".format(odecet.pocatecni_hodnota_vt).replace(',', ' ') if odecet.pocatecni_hodnota_vt else '0,00' }}</td>
                    <td class="number">{{ "{:,.2f}".format(odecet.hodnota_odectu_vt).replace(',', ' ') if odecet.hodnota_odectu_vt else '0,00' }}</td>
                    <td class="number">{{ "{:,.2f}".format(odecet.spotreba_vt).replace(',', ' ') if odecet.spotreba_vt else '0,00' }}</td>
                    <td class="unit">kWh</td>
                    <td class="description">{{ odecet.priznak if odecet.priznak else '' }}</td>
                </tr>
                
                <!-- NT řádek - vždy zobrazit -->
                <tr>
                    <td class="description">Spotřeba NT</td>
                    <td class="date">{{ odecet.zacatek_periody_mereni.strftime('%d.%m.%Y') if odecet.zacatek_periody_mereni else '' }}</td>
                    <td class="date">{{ odecet.konec_periody_mereni.strftime('%d.%m.%Y') if odecet.konec_periody_mereni else '' }}</td>
                    <td class="number">{{ "{:,.2f}".format(odecet.pocatecni_hodnota_nt).replace(',', ' ') if odecet.pocatecni_hodnota_nt else '0,00' }}</td>
                    <td class="number">{{ "{:,.2f}".format(odecet.hodnota_odectu_nt).replace(',', ' ') if odecet.hodnota_odectu_nt else '0,00' }}</td>
                    <td class="number">{{ "{:,.2f}".format(odecet.spotreba_nt).replace(',', ' ') if odecet.spotreba_nt else '0,00' }}</td>
                    <td class="unit">kWh</td>
                    <td class="description">{{ odecet.priznak if odecet.priznak else '' }}</td>
                </tr>
            </tbody>
        </table>
    </div>
    {% endfor %}

</body>
</html>